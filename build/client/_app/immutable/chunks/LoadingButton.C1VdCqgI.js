var L=e=>{throw TypeError(e)};var C=(e,t,s)=>t.has(e)||L("Cannot "+s);var i=(e,t,s)=>(C(e,t,"read from private field"),s?s.call(e):t.get(e)),g=(e,t,s)=>t.has(e)?L("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),y=(e,t,s,a)=>(C(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),_=(e,t,s)=>(C(e,t,"access private method"),s);import{r as K,g as P,d as U}from"./index.BkiM7uAi.js";import{S as j,s as Q,h as k,g as z,n as q,a as A,B as D,b as O}from"./button.C88FkVZf.js";import"./disclose-version.Bg9kRutz.js";import{f as B,e as V,g as F,j as w,i as G,r as H,l as E}from"./runtime.aUzNjL39.js";import{c as I,a as S,t as J}from"./template.DeaMfOID.js";import{i as T}from"./if.DtqLP0Zw.js";import{s as W}from"./snippet.CwITyDou.js";import{l as X,s as N,r as Y}from"./props.XMVdRfqy.js";import{c as Z}from"./utils.rToxleUx.js";import{b as $}from"./index.1APeLoBs.js";import{s as tt}from"./slot.CNa0AiKR.js";import{I as st}from"./Icon.2RWYNG04.js";var f,v,n,d,m,M,x,R,et=(R=class extends j{constructor(t,s){super();g(this,m);g(this,f);g(this,v);g(this,n);g(this,d);y(this,f,t),this.setOptions(s),this.bindMethods(),_(this,m,M).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var a;const s=this.options;this.options=i(this,f).defaultMutationOptions(t),Q(this.options,s)||i(this,f).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,n),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&k(s.mutationKey)!==k(this.options.mutationKey)?this.reset():((a=i(this,n))==null?void 0:a.state.status)==="pending"&&i(this,n).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=i(this,n))==null||t.removeObserver(this)}onMutationUpdate(t){_(this,m,M).call(this),_(this,m,x).call(this,t)}getCurrentResult(){return i(this,v)}reset(){var t;(t=i(this,n))==null||t.removeObserver(this),y(this,n,void 0),_(this,m,M).call(this),_(this,m,x).call(this)}mutate(t,s){var a;return y(this,d,s),(a=i(this,n))==null||a.removeObserver(this),y(this,n,i(this,f).getMutationCache().build(i(this,f),this.options)),i(this,n).addObserver(this),i(this,n).execute(t)}},f=new WeakMap,v=new WeakMap,n=new WeakMap,d=new WeakMap,m=new WeakSet,M=function(){var s;const t=((s=i(this,n))==null?void 0:s.state)??z();y(this,v,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},x=function(t){q.batch(()=>{var s,a,o,r,b,h,l,c;if(i(this,d)&&this.hasListeners()){const u=i(this,v).variables,p=i(this,v).context;(t==null?void 0:t.type)==="success"?((a=(s=i(this,d)).onSuccess)==null||a.call(s,t.data,u,p),(r=(o=i(this,d)).onSettled)==null||r.call(o,t.data,null,u,p)):(t==null?void 0:t.type)==="error"&&((h=(b=i(this,d)).onError)==null||h.call(b,t.error,u,p),(c=(l=i(this,d)).onSettled)==null||c.call(l,void 0,t.error,u,p))}this.listeners.forEach(u=>{u(i(this,v))})})},R);function it(e){return A()}function rt(e){return"subscribe"in e&&typeof e.subscribe=="function"}function at(){}function Ot(e,t){const s=it(),a=rt(e)?e:K(e),o=new et(s,P(a));let r;a.subscribe(l=>{r=(c,u)=>{o.mutate(c,u).catch(at)},o.setOptions(l)});const b=K(o.getCurrentResult(),l=>o.subscribe(q.batchCalls(c=>l(c)))),{subscribe:h}=U(b,l=>({...l,mutate:r,mutateAsync:l.mutate}));return{subscribe:h}}function nt(e,t){const s=X(t,["children","$$slots","$$events","$$legacy"]);st(e,N({name:"loader-circle"},()=>s,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(o,r)=>{var b=I(),h=B(b);tt(h,t,"default",{},null),S(o,b)},$$slots:{default:!0}}))}var ot=J('<div class="flex items-center justify-center text-accent"><!></div>');function Mt(e,t){V(t,!0);let s=Y(t,["$$slots","$$events","$$legacy","children","class","disabled","isLoading"]);var a=E(()=>Z($({className:t.class}))),o=E(()=>t.disabled||t.isLoading);D(e,N({get class(){return w(a)},get disabled(){return w(o)}},()=>s,{$$events:{click(r){O.call(this,t,r)},change(r){O.call(this,t,r)},keydown(r){O.call(this,t,r)},keyup(r){O.call(this,t,r)},mouseenter(r){O.call(this,t,r)},mouseleave(r){O.call(this,t,r)}},children:(r,b)=>{var h=ot(),l=G(h);T(l,()=>t.isLoading,c=>{nt(c,{class:"mr-2 h-4 w-4 animate-spin"})},c=>{var u=I(),p=B(u);W(p,()=>t.children),S(c,u)}),H(h),S(r,h)},$$slots:{default:!0}})),F()}export{Mt as L,Ot as c};
