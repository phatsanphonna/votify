import"../chunks/disclose-version.Bg9kRutz.js";import{e as P,g as S,j as a,k as l,s as i,l as d,i as u,n as _,r as c}from"../chunks/runtime.8MaW9EIQ.js";import{e as j}from"../chunks/render.DNC5ILtV.js";import{a as g,t as I,b as O}from"../chunks/template.DEdvQlwJ.js";import{a as f}from"../chunks/props.MJjq2fm6.js";import{s as J,a as L}from"../chunks/store.B8IAFY5V.js";import{g as N}from"../chunks/entry.B_7kLJt4.js";import"../chunks/index.ysDOyIPM.js";import{c as k,L as E}from"../chunks/LoadingButton.Bgv8OQjq.js";import"../chunks/create.BlF16bQl.js";import{I as v}from"../chunks/input.CpoUotnd.js";var T=I('<div class="p-8 flex flex-col gap-4"><h1 class="text-center text-4xl font-bold text-primary">เข้าสู่ระบบ</h1> <form class="flex flex-col gap-2"><!> <!> <!></form></div>');function R(x,h){P(h,!0);const y=J(),e=()=>L(w,"$mutate",y);let s=d(""),o=d("");const w=k({mutationKey:["signin"],mutationFn:async()=>{const t=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nationalId:a(s),password:a(o)})});if(!t.ok)throw new Error(JSON.parse((await t.json()).message));return await t.json()},onSuccess:t=>{N("/vote")},onError:t=>{console.error(JSON.stringify(t))}});var r=T(),n=i(u(r),2),p=u(n);v(p,{get value(){return a(s)},set value(t){l(s,f(t))},placeholder:"เลขบัตรประชาชน",inputmode:"numeric",get disabled(){return e().isPending}});var m=i(p,2);v(m,{get value(){return a(o)},set value(t){l(o,f(t))},placeholder:"รหัสผ่าน",type:"password",get disabled(){return e().isPending}});var $=i(m,2);E($,{type:"submit",get isLoading(){return e().isPending},children:(t,A)=>{_();var b=O("เข้าสู่ระบบ");g(t,b)},$$slots:{default:!0}}),c(n),c(r),j("submit",n,async()=>await e().mutateAsync()),g(x,r),S()}export{R as component};
