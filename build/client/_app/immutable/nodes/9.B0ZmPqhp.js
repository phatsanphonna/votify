import"../chunks/disclose-version.Bg9kRutz.js";import{e as I,g as S,j as e,k as d,s,l,i as v,n as j,r as h}from"../chunks/runtime.8MaW9EIQ.js";import{e as L}from"../chunks/render.DNC5ILtV.js";import{a as x,t as k,b as O}from"../chunks/template.DEdvQlwJ.js";import{a as m}from"../chunks/props.MJjq2fm6.js";import{s as T,a as A}from"../chunks/store.B8IAFY5V.js";import{g as B}from"../chunks/entry.B_7kLJt4.js";import"../chunks/index.ysDOyIPM.js";import{c as C,L as E}from"../chunks/LoadingButton.Bgv8OQjq.js";import{I as u}from"../chunks/input.CpoUotnd.js";var F=k('<div class="p-8 flex flex-col gap-4"><h1 class="text-center text-4xl font-bold text-primary">สร้างบัญชีผู้ใช้</h1> <form class="flex flex-col gap-2"><!> <!> <!> <!></form></div>');function U(y,w){I(w,!0);const b=T(),a=()=>A($,"$mutate",b);let o=l(""),r=l(""),n=l("");const $=C({mutationKey:["signup"],mutationFn:async()=>{const t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nationalId:e(o),password:e(r),confirmPassword:e(n)})});if(!t.ok)throw new Error("Sign in failed");return await t.json()},onSuccess:t=>{B("/vote")}});var i=F(),p=s(v(i),2),c=v(p);u(c,{get value(){return e(o)},set value(t){d(o,m(t))},placeholder:"เลขบัตรประชาชน",inputmode:"numeric",get disabled(){return a().isPending}});var g=s(c,2);u(g,{get value(){return e(r)},set value(t){d(r,m(t))},placeholder:"รหัสผ่าน",type:"password",get disabled(){return a().isPending}});var f=s(g,2);u(f,{get value(){return e(n)},set value(t){d(n,m(t))},placeholder:"ยืนยันรหัสผ่าน",type:"password",get disabled(){return a().isPending}});var P=s(f,2);E(P,{type:"submit",get isLoading(){return a().isPending},children:(t,J)=>{j();var _=O("สร้างบัญชีผู้ใช้");x(t,_)},$$slots:{default:!0}}),h(p),h(i),L("submit",p,async()=>await a().mutateAsync()),x(y,i),S()}export{U as component};
