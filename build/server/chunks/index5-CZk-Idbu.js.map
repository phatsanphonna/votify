{"version":3,"file":"index5-CZk-Idbu.js","sources":["../../../.svelte-kit/adapter-node/chunks/index5.js"],"sourcesContent":["import { d as private_env } from \"./shared-server.js\";\nimport jwt from \"jsonwebtoken\";\nconst { sign, verify } = jwt;\nconst createToken = (payload) => {\n  return sign(payload, private_env.SECRET, {\n    expiresIn: \"24h\",\n    subject: payload.id\n  });\n};\nconst verifyToken = (token) => {\n  return verify(token, private_env.SECRET);\n};\nconst handleSession = async ({ event, resolve }) => {\n  const token = event.cookies.get(\"access_token\");\n  console.log(\"token\", token);\n  if (!token) {\n    return await resolve(event);\n  }\n  try {\n    const payload = verifyToken(token);\n    event.locals.user = payload;\n    return await resolve(event);\n  } catch (err) {\n    console.error(err);\n    return await resolve(event);\n  }\n};\nexport {\n  createToken as c,\n  handleSession as h\n};\n"],"names":[],"mappings":";;;AAEA,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,GAAG;AACvB,MAAC,WAAW,GAAG,CAAC,OAAO,KAAK;AACjC,EAAE,OAAO,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC,MAAM,EAAE;AAC3C,IAAI,SAAS,EAAE,KAAK;AACpB,IAAI,OAAO,EAAE,OAAO,CAAC;AACrB,GAAG,CAAC;AACJ;AACA,MAAM,WAAW,GAAG,CAAC,KAAK,KAAK;AAC/B,EAAE,OAAO,MAAM,CAAC,KAAK,EAAE,WAAW,CAAC,MAAM,CAAC;AAC1C,CAAC;AACI,MAAC,aAAa,GAAG,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK;AACpD,EAAE,MAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC;AACjD,EAAE,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,CAAC;AAC7B,EAAE,IAAI,CAAC,KAAK,EAAE;AACd,IAAI,OAAO,MAAM,OAAO,CAAC,KAAK,CAAC;AAC/B;AACA,EAAE,IAAI;AACN,IAAI,MAAM,OAAO,GAAG,WAAW,CAAC,KAAK,CAAC;AACtC,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,GAAG,OAAO;AAC/B,IAAI,OAAO,MAAM,OAAO,CAAC,KAAK,CAAC;AAC/B,GAAG,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC;AACtB,IAAI,OAAO,MAAM,OAAO,CAAC,KAAK,CAAC;AAC/B;AACA;;;;"}